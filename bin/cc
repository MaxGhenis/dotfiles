#!/bin/zsh
# Usage: cc [name]
# Creates a new Claude Code pane in the current tmux session.
# Falls back to a timestamp if no name is given.

if [[ -z "$TMUX" ]]; then
  echo "Error: not inside a tmux session" >&2
  exit 1
fi

name="${1:-$(date +%H%M%S)}"
# Launch claude directly (not via send-keys) so the pane exits cleanly on /exit
# exec zsh keeps the pane alive as a shell after claude exits
tmux split-window -c ~ -t '{end}' "claude --dangerously-skip-permissions; exec zsh"
tmux select-pane -T "$name"
tmux select-layout tiled
